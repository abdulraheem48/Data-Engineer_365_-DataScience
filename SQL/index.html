import React, { useState } from "react";

const courseData = [
  {
    title: "1. Introduction to Databases, SQL, and MySQL",
    duration: "20 min",
    lessons: [
      { type: "video", title: "Welcome to SQL", time: "03:59", file: "/videos/welcome.mp4" },
      { type: "video", title: "Why SQL?", time: "03:17", file: "/videos/why-sql.mp4" },
      { type: "exercise", title: "Exercise", questions: 3 },
      { type: "video", title: "Why MySQL?", time: "01:57", file: "/videos/why-mysql.mp4" },
      { type: "exercise", title: "Exercise", questions: 3 },
      { type: "video", title: "Introduction to databases", time: "04:44", file: "/videos/intro-db.mp4" },
    ],
  },
  {
    title: "2. SQL Theory",
    duration: "25 min",
    lessons: [
      { type: "video", title: "SQL as a declarative language", time: "02:10", file: "/videos/sql-declarative.mp4" },
      { type: "video", title: "Data definition language (DDL)", time: "04:12", file: "/videos/ddl.mp4" },
      { type: "exercise", title: "Exercise", questions: 3 },
      { type: "video", title: "SQL keywords", time: "01:12", file: "/videos/sql-keywords.mp4" },
      { type: "exercise", title: "Exercise", questions: 1 },
      { type: "video", title: "Data manipulation language (DML)", time: "04:55", file: "/videos/dml.mp4" },
      { type: "exercise", title: "Exercise", questions: 3 },
      { type: "video", title: "Data control language (DCL)", time: "05:03", file: "/videos/dcl.mp4" },
      { type: "exercise", title: "Exercise", questions: 1 },
      { type: "video", title: "Transaction control language (TCL)", time: "03:02", file: "/videos/tcl.mp4" },
      { type: "exercise", title: "Exercise", questions: 4 },
    ],
  },
  {
    title: "3. Basic Database Terminology",
    duration: "34 min",
    lessons: [
      { type: "video", title: "Relational database essentials", time: "04:51", file: "/videos/db-essentials.mp4" },
      { type: "exercise", title: "Exercise", questions: 3 },
      { type: "video", title: "Databases vs spreadsheets", time: "07:05", file: "/videos/db-vs-spreadsheets.mp4" },
      { type: "exercise", title: "Exercise", questions: 4 },
      { type: "video", title: "Database terminology", time: "04:17", file: "/videos/db-terminology.mp4" },
      { type: "exercise", title: "Exercise", questions: 1 },
      { type: "video", title: "Relational schemas - Primary key", time: "04:55", file: "/videos/primary-key.mp4" },
      { type: "exercise", title: "Exercise", questions: 4 },
      { type: "video", title: "Relational schemas - Foreign key", time: "04:58", file: "/videos/foreign-key.mp4" },
      { type: "exercise", title: "Exercise", questions: 3 },
      { type: "video", title: "Relational schemas - Unique key and null values", time: "03:07", file: "/videos/unique-null.mp4" },
      { type: "exercise", title: "Exercise", questions: 1 },
      { type: "video", title: "Relationships", time: "04:39", file: "/videos/relationships.mp4" },
      { type: "exercise", title: "Exercise", questions: 4 },
    ],
  },
  {
    title: "4. Installing MySQL and Getting Acquainted with the Interface",
    duration: "30 min",
    lessons: [
      { type: "video", title: "Installing MySQL", time: "10:44", file: "/videos/install-mysql.mp4" },
      { type: "pdf", title: "Additional note ‚Äì Installing ‚Äì Visual C", file: "/pdfs/visualc-install.pdf" },
      { type: "pdf", title: "Installing MySQL on macOS and Unix systems", file: "/pdfs/install-macos.pdf" },
      { type: "pdf", title: "The Client-Server Model", file: "/pdfs/client-server.pdf" },
      { type: "video", title: "Setting up a connection", time: "02:34", file: "/videos/connection.mp4" },
      { type: "pdf", title: "Important - Please read", file: "/pdfs/important.pdf" },
      { type: "video", title: "New Authentication Plugin - Creating a New User", time: "06:18", file: "/videos/new-user.mp4" },
      { type: "video", title: "Introduction to the MySQL interface", time: "05:09", file: "/videos/mysql-interface.mp4" },
      { type: "exercise", title: "Exercise", questions: 5 },
    ],
  },
  {
    title: "5. First Steps in SQL",
    duration: "46 min",
    lessons: [
      { type: "video", title: "Creating a Database - Part I", time: "05:12", file: "/videos/create-db-part1.mp4" },
      { type: "pdf", title: "Creating a Database - Part I - Exercise", file: "/pdfs/create-db-ex1.pdf" },
      { type: "pdf", title: "SQL files", file: "/pdfs/sql-files.pdf" },
      { type: "video", title: "Creating a Database - Part II", time: "02:21", file: "/videos/create-db-part2.mp4" },
      { type: "exercise", title: "Exercise", questions: 2 },
      { type: "pdf", title: "Creating a Database - Part II - Exercise", file: "/pdfs/create-db-ex2.pdf" },
      { type: "video", title: "Introduction to data types", time: "06:10", file: "/videos/data-types.mp4" },
      { type: "exercise", title: "Exercise", questions: 1 },
      { type: "video", title: "String data types", time: "05:01", file: "/videos/string-types.mp4" },
      { type: "exercise", title: "Exercise", questions: 2 },
      { type: "video", title: "Integers", time: "04:10", file: "/videos/integers.mp4" },
      { type: "exercise", title: "Exercise", questions: 6 },
      { type: "video", title: "Fixed and floating-point data types", time: "05:43", file: "/videos/numeric-types.mp4" },
      { type: "exercise", title: "Exercise", questions: 1 },
      { type: "video", title: "Other useful data types", time: "06:12", file: "/videos/other-types.mp4" },
      { type: "exercise", title: "Exercise", questions: 4 },
      { type: "video", title: "Creating a table", time: "05:16", file: "/videos/create-table.mp4" },
      { type: "pdf", title: "Creating a table - Exercise", file: "/pdfs/create-table-ex.pdf" },
      { type: "video", title: "Using databases and tables", time: "03:03", file: "/videos/using-tables.mp4" },
      { type: "pdf", title: "Using databases and tables - Exercise", file: "/pdfs/using-tables-ex.pdf" },
      { type: "pdf", title: "Additional notes on using tables", file: "/pdfs/notes-using-tables.pdf" },
      { type: "pdf", title: "Additional notes on using tables - Exercise", file: "/pdfs/notes-tables-ex.pdf" },
      { type: "exercise", title: "Exercise", questions: 6 },
    ],
  },
];

export default function CoursePlayer() {
  const [selectedLesson, setSelectedLesson] = useState(courseData[0].lessons[0]);

  const renderContent = () => {
    if (!selectedLesson) return <p>Select a lesson</p>;

    if (selectedLesson.type === "video") {
      return (
        <video key={selectedLesson.file} controls width="100%" style={{ borderRadius: "10px" }}>
          <source src={selectedLesson.file} type="video/mp4" />
          Your browser does not support the video tag.
        </video>
      );
    } else if (selectedLesson.type === "pdf") {
      return (
        <iframe
          key={selectedLesson.file}
          src={selectedLesson.file}
          title={selectedLesson.title}
          width="100%"
          height="600px"
          style={{ border: "none", borderRadius: "10px" }}
        />
      );
    } else if (selectedLesson.type === "exercise") {
      return (
        <div style={{ padding: "20px" }}>
          <h2>Exercise</h2>
          <p>Contains {selectedLesson.questions} questions.</p>
        </div>
      );
    }
  };

  return (
    <div style={{ display: "flex", height: "100vh", fontFamily: "Arial, sans-serif" }}>
      {/* Left Side: Video/PDF Viewer */}
      <div style={{ flex: 2, padding: "20px", background: "#f9f9f9" }}>
        <h2>{selectedLesson?.title}</h2>
        {renderContent()}
      </div>

      {/* Right Side: Course Content */}
      <div
        style={{
          flex: 1,
          padding: "20px",
          overflowY: "auto",
          background: "#fff",
          borderLeft: "1px solid #ddd",
        }}
      >
        {courseData.map((chapter, i) => (
          <div key={i} style={{ marginBottom: "20px" }}>
            <h3>{chapter.title} ({chapter.duration})</h3>
            <ul style={{ listStyle: "none", padding: 0 }}>
              {chapter.lessons.map((lesson, j) => (
                <li
                  key={j}
                  onClick={() => setSelectedLesson(lesson)}
                  style={{
                    cursor: "pointer",
                    padding: "8px",
                    borderBottom: "1px solid #eee",
                    background:
                      selectedLesson.title === lesson.title ? "#eef6ff" : "transparent",
                  }}
                >
                  {lesson.type === "video" && "üé¨ "}
                  {lesson.type === "pdf" && "üìÑ "}
                  {lesson.type === "exercise" && "üìù "}
                  {lesson.title}{" "}
                  {lesson.time && <span style={{ color: "#666" }}>({lesson.time} min)</span>}
                  {lesson.questions && (
                    <span style={{ color: "#666" }}> - {lesson.questions} questions</span>
                  )}
                </li>
              ))}
            </ul>
          </div>
        ))}
      </div>
    </div>
  );
}
